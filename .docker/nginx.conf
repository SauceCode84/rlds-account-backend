worker_processes 1;

events { worker_connections 1024; }

http {
  
  sendfile  on;

  upstream node-api {
    server node:3000;
  }

  upstream rethinkdb {
    server rethinkdb:8080;
  }
  
  server {
    listen  80;
    listen  [::]:80;
    server_name api.rldancestudio.co.za;

    location / {
      proxy_pass  http://node-api/;
    }
  }

  server {
    listen  80;
    listen  [::]:80;
    server_name rethinkdb.rldancestudio.co.za;

    location / {
      proxy_pass  http://rethinkdb/;
    }
  }

}